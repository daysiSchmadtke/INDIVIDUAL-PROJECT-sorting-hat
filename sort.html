<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sorting</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/styles/sort.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  </head>
  <body>
    <h1 class="text-center mb-4">
      Do you think you have what it takes to be a Gryffindor, or perhaps a
      Ravenclaw? Or maybe something else entirely?
    </h1>
    <img
      id="hat"
      src="/assets/imgs/sorting2-hat.gif"
      class="mx-auto d-block my-4"
    />
    <div class="footprint" id="footprint1"></div>
    <div class="footprint" id="footprint2"></div>
    <div class="footprint" id="footprint3"></div>
    <div class="footprint" id="footprint4"></div>
    <div class="footprint" id="footprint5"></div>

    <div id="cards" class="text-center mt-4">
      <!-- CARDS WILL RENDER HERE  -->
    </div>

    <div class="container btn-container">
      <button type="button" class="btn btn-danger" id="Gryffindor">
        Gryffindor
      </button>
      <button type="button" class="btn btn-warning" id="Hufflepuff">
        Hufflepuff
      </button>
      <button type="button" class="btn btn-primary" id="Ravenclaw">
        Ravenclaw
      </button>
      <button type="button" class="btn btn-success" id="Slytherin">
        Slytherin
      </button>
      <button type="button" class="btn btn-dark" id="Voldi-Army">
        Voldi Army
      </button>
    </div>

    <form id="sortingForm" class="p-4 border rounded bg-light shadow">
      <div class="mb-3">
        <label for="name" class="form-label">Enter your Name</label>
        <input
          type="text"
          class="form-control"
          id="name"
          placeholder="Enter your name"
          required
        />
      </div>
      <div class="mb-3">
        <label for="question1" class="form-label">
          You hear what sounds like a creature screaming in the forbidden
          forest, then...
        </label>
        <select id="question1" name="question1" class="form-select" required>
          <option value="">--Please choose an option--</option>
          <option value="5">
            Keep walking, It is clearly a trap from some hungry lowly creature
          </option>
          <option value="10">Gather more information and tell a teacher</option>
          <option value="15">
            Run in to help the creature before it is too late
          </option>
          <option value="20">
            Grab your wand and march in to defend the creature
          </option>
        </select>
      </div>
      <div class="mb-3">
        <label for="question2" class="form-label">
          You can only bring one item to your first tournament challenge, you
          choose to bring...
        </label>
        <select id="question2" name="question2" class="form-select" required>
          <option value="">--Please choose an option--</option>
          <option value="10">your trusted wand</option>
          <option value="15">A tranquilizer gun</option>
          <option value="20">A flaming magical sword</option>
          <option value="5">your nimbus broom</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="question3" class="form-label">
          At the bottom of black lake they got what you love the most:
        </label>
        <select id="question3" name="question3" class="form-select" required>
          <option value="">--Please choose an option--</option>
          <option value="10">
            A one of a kind potion that you found in a remote place
          </option>
          <option value="5">your beloved parents</option>
          <option value="15">your pet Jeremiah childhood frog</option>
          <option value="20">Your two best friends</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="question4" class="form-label"
          >You are an Animagus that can turn into:</label
        >
        <select id="question4" name="question4" class="form-select" required>
          <option value="">--Please choose an option--</option>
          <option value="20">German Shepherd</option>
          <option value="5">A black cat</option>
          <option value="10">An owl</option>
          <option value="15">A golden retriever</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="question5" class="form-label">
          Voldi is trying to recruit you, he offered you...
        </label>
        <select id="question5" name="question5" class="form-select" required>
          <option value="">--Please choose an option--</option>
          <option value="20">
            Join me and together we will have the power to bring your sister
            Adelaide to a new life, a life that was taken too early by those
            muggles that attacked her, the chance to smile and grow in a free
            world.
          </option>
          <option value="5">
            Join me, and together we can reignite the magic of Merlin's time,
            where true power and greatness was truly boundless, a world where
            new dragons are born and wizards do not fear their own power.
          </option>
          <option value="10">
            Join me and I will show you the secrets of Magic long hidden, the
            truths the minister keeps away to keep us as infants in the dark
            arts.
          </option>
          <option value="15">
            Stand with me and you and your loved ones will not be touch by the
            horrors of war, the horrors of loyalty to the losing side.
          </option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary w-100" id="form-submit">
        Sort!
      </button>
    </form>

    <button id="getMentor" class="btn btn-info mt-3">Find your Mentor</button>
    <div id="mentorContainer" class="container mt-4"></div>

    <button
      id="btn-music"
      type="button"
      onclick="document.getElementById('background-music').play()"
      class="btn btn-primary mt-3"
    >
      Play Music
    </button>
    <audio id="background-music" loop>
      <source src="/music/19 - Hedwig_s Theme.mp3" type="audio/mpeg" />
      Your browser does not support the audio element.
    </audio>
    <script>
      document
        .getElementById("form-submit")
        .addEventListener("click", function () {
          document
            .getElementById("background-music")
            .play()
            .catch(function (error) {
              console.log("Audio playback failed:", error);
            });
        });

      document.addEventListener("DOMContentLoaded", () => {
        const footprints = document.querySelectorAll(".footprint");

        anime({
          targets: footprints,
          translateX: function () {
            return anime.random(0, window.innerWidth);
          },
          translateY: function () {
            return anime.random(0, window.innerHeight);
          },
          opacity: [
            { value: 0.5, duration: 1000, delay: anime.stagger(2000) },
            { value: 0, duration: 1000, delay: anime.stagger(2000) },
          ],
          easing: "easeInOutQuad",
          duration: 10000, // Slowed down the movement
          loop: true,
        });
      });

      //API
      const apiUrl = "https://hp-api.herokuapp.com/api/characters";

      document.getElementById("getMentor").addEventListener("click", () => {
        fetch(apiUrl)
          .then((response) => response.json())
          .then((data) => {
            const mentor = data[Math.floor(Math.random() * data.length)];
            displayM(mentor);
          })
          .catch((error) => console.error("Error:", error));
      });

      const displayM = (mentor) => {
        const mentorContainer = document.getElementById("mentorContainer");
        mentorContainer.innerHTML = `
<h2>Your Mentor is: ${mentor.name}</h2>
`;
      };
    </script>

    <script type="module" src="/data/students.js"></script>
    <script type="module" src="/data/army.js"></script>
    <script type="module" src="/main.js"></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
